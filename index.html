<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="icon" type="image/png" href="rsc/img/icon.png" />

        <title>Just to run some tests</title>
    </head>
    <body>
        <script src="src/Type.js"></script>
        <script src="lib/stampit.js"></script>
        <!--<script src="test/prototypes/syntax.js"></script>-->
        <script>
            const $type    = Symbol.for('cell-type');
            const $attrs   = Symbol.for('cell-type.attrs');
            const $statics = Symbol.for('cell-type.statics');
            const $state   = Symbol.for('cell-type.state');

            const expect = function() {
                console.log.apply(console, arguments);

                return {
                    to: {
                        eql(){},
                        be: {
                            false: false,
                            true:  true
                        }
                    }
                }
            };

            /************************************************/

            var $init  = Symbol('init');
            var $prop  = Symbol('prop');
            var $$prop = Symbol('$prop');

            const B = Type({name: 'Beginner', properties: {
                [$init](skill)
                {
                    this.skills = ['html'];
                    if(skill) {this.skills.push(skill)}

                    return this
                },
                [$prop]: 42,
                [$$prop]: {[$attrs]: 'static', value: 43}
            }});

            const b = Object.create(B, B[$state])[$init]('xhtml');

            expect(b.skills).to.eql(["html", "xhtml"]);
            expect(b[$prop]).to.eql(42);
            expect(b[$$prop]).to.eql(43);
            b[$$prop] = 44;
            expect(b[$$prop]).to.eql(44);
            expect(b[$statics][$$prop]).to.eql(44);

            const stamp = stampit.properties({ foo: { bar: 'bar' }}).statics({
                sprop: 666,
                smethod() {return 'kabouter'}
            });

            const obj = stamp.create();

            console.log(obj.foo.bar);

            /************************************************/

            console.log('okay');

        </script>
    </body>
</html>